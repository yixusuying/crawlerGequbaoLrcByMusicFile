# æ­Œæ›²å®æ­Œè¯æ‰¹é‡è·å–å·¥å…·

è‡ªåŠ¨ä»æœ¬åœ°éŸ³ä¹æ–‡ä»¶æ‰¹é‡è·å–å¯¹åº”çš„LRCæ­Œè¯æ–‡ä»¶ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸµ **æ™ºèƒ½è¯†åˆ«** - è‡ªåŠ¨è§£æéŸ³ä¹æ–‡ä»¶åï¼Œæå–æ­Œæ‰‹å’Œæ­Œåä¿¡æ¯
- ğŸ” **æ‰¹é‡æœç´¢** - æ‰¹é‡åœ¨æ­Œæ›²å®ç½‘ç«™æœç´¢å¯¹åº”æ­Œè¯
- ğŸ“ **è‡ªåŠ¨ä¿å­˜** - å°†æ­Œè¯ä¿å­˜ä¸ºä¸åŸéŸ³ä¹æ–‡ä»¶åŒåçš„LRCæ–‡ä»¶
- ğŸš€ **é«˜æ•ˆå¤„ç†** - æ”¯æŒå¹¶å‘æ§åˆ¶å’Œè¯·æ±‚å»¶è¿Ÿï¼Œé¿å…é¢‘ç¹è¯·æ±‚
- ğŸ“ **é€’å½’æ‰«æ** - æ”¯æŒé€’å½’æ‰«æå­æ–‡ä»¶å¤¹ä¸­çš„éŸ³ä¹æ–‡ä»¶

## å¿«é€Ÿå¼€å§‹

### 1. æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼

```bash
# ç›´æ¥è¿è¡Œä¸»ç¨‹åº
node gequbaoLrc/index.js
```

é»˜è®¤ä¼šæ‰«æ `D:\chromeDownLoad\musicFlie` æ–‡ä»¶å¤¹ï¼Œä½ éœ€è¦ä¿®æ”¹ `index.js` ä¸­çš„è·¯å¾„ã€‚

### 2. ä»£ç ä¸­ä½¿ç”¨

```javascript
const { quickStart } = require('./gequbaoLrc');

// å¤„ç†éŸ³ä¹æ–‡ä»¶å¤¹ï¼Œè·å–å‰10ä¸ªæ–‡ä»¶çš„æ­Œè¯
await quickStart('D:\\ä½ çš„éŸ³ä¹æ–‡ä»¶å¤¹', 10);
```

### 3. å®Œæ•´é…ç½®

```javascript
const { processFullPipeline } = require('./gequbaoLrc');

const results = await processFullPipeline('D:\\éŸ³ä¹æ–‡ä»¶å¤¹', {
  recursive: true,        // é€’å½’æ‰«æå­æ–‡ä»¶å¤¹
  limit: 50,             // é™åˆ¶å¤„ç†50ä¸ªæ–‡ä»¶
  delay: 2000,           // è¯·æ±‚é—´éš”2ç§’
  saveIntermediateFiles: true  // ä¿å­˜ä¸­é—´æ–‡ä»¶
});
```

## å·¥ä½œæµç¨‹

1. **æ‰«æéŸ³ä¹æ–‡ä»¶** 
   - æ‰«ææŒ‡å®šæ–‡ä»¶å¤¹ä¸­çš„éŸ³ä¹æ–‡ä»¶ï¼ˆ.mp3, .wav, .flacç­‰ï¼‰
   - è§£ææ–‡ä»¶åï¼Œæå–æ­Œæ‰‹å’Œæ­Œåä¿¡æ¯

2. **ç”Ÿæˆæœç´¢URL**
   - æ ¹æ®æ­Œæ‰‹å’Œæ­Œåç”Ÿæˆæ­Œæ›²å®æœç´¢URL
   - ä¿ç•™åŸå§‹æ–‡ä»¶åæ˜ å°„å…³ç³»

3. **çˆ¬å–æ­Œè¯**
   - è®¿é—®æ­Œæ›²å®ç½‘ç«™æœç´¢æ­Œæ›²
   - è·å–ç¬¬ä¸€ä¸ªæœç´¢ç»“æœçš„è¯¦æƒ…é¡µ
   - ä» `#content-lrc` å…ƒç´ æå–æ­Œè¯å†…å®¹

4. **ä¿å­˜LRCæ–‡ä»¶**
   - ä½¿ç”¨åŸå§‹éŸ³ä¹æ–‡ä»¶åä¿å­˜æ­Œè¯
   - ä¿å­˜ä½ç½®ï¼š`./result/lrc/`
   - æ–‡ä»¶åæ ¼å¼ï¼š`åŸå§‹æ–‡ä»¶å.lrc`

## æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ¨¡å—

- **index.js** - ä¸»å…¥å£æ–‡ä»¶ï¼Œè¿è¡Œå®Œæ•´æµç¨‹
- **fullPipeline.js** - å®Œæ•´å¤„ç†æµç¨‹å®ç°
- **audioParser.js** - éŸ³ä¹æ–‡ä»¶è§£æå™¨
- **urlGenerator.js** - æœç´¢URLç”Ÿæˆå™¨
- **gequbaoCrawler.js** - æ­Œæ›²å®ç½‘ç«™çˆ¬è™«
- **domCrawler.js** - é€šç”¨DOMçˆ¬è™«åŸºç±»
- **crawlerFactory.js** - çˆ¬è™«å·¥å‚ç±»

### æµ‹è¯•æ–‡ä»¶

- **testGequbao.js** - çˆ¬è™«åŠŸèƒ½æµ‹è¯•
- **example.js** - ä½¿ç”¨ç¤ºä¾‹

### è¾“å‡ºæ–‡ä»¶

- **./result/lrc/** - LRCæ­Œè¯æ–‡ä»¶ä¿å­˜ç›®å½•
- **./music_list.json** - æ‰«æåˆ°çš„éŸ³ä¹æ–‡ä»¶åˆ—è¡¨
- **./result/*.json** - çˆ¬å–ç»“æœè®°å½•

## æ”¯æŒçš„éŸ³ä¹æ ¼å¼

- .mp3
- .wav
- .flac
- .m4a
- .aac
- .ogg
- .wma

## æ–‡ä»¶åè§£æè§„åˆ™

æ”¯æŒä»¥ä¸‹å¸¸è§æ ¼å¼ï¼š
- `æ­Œæ‰‹ - æ­Œå.mp3`
- `æ­Œæ‰‹ ï¼ æ­Œå.mp3`ï¼ˆä¸­æ–‡ç ´æŠ˜å·ï¼‰
- `æ­Œæ‰‹_æ­Œå.mp3`
- `æ­Œåã€æ­Œæ‰‹ã€‘.mp3`
- `æ­Œå[æ­Œæ‰‹].mp3`
- `æ­Œå(æ­Œæ‰‹).mp3`
- `æ­Œå by æ­Œæ‰‹.mp3`

## é…ç½®é€‰é¡¹

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|------|--------|------|
| recursive | Boolean | true | æ˜¯å¦é€’å½’æ‰«æå­æ–‡ä»¶å¤¹ |
| limit | Number | null | é™åˆ¶å¤„ç†æ–‡ä»¶æ•°é‡ |
| delay | Number | 2000 | è¯·æ±‚é—´éš”ï¼ˆæ¯«ç§’ï¼‰ |
| saveIntermediateFiles | Boolean | true | æ˜¯å¦ä¿å­˜ä¸­é—´æ–‡ä»¶ |
| maxConcurrent | Number | 2 | æœ€å¤§å¹¶å‘è¯·æ±‚æ•° |

## æ³¨æ„äº‹é¡¹

1. **è¯·æ±‚é¢‘ç‡** - é»˜è®¤è®¾ç½®äº†2ç§’çš„è¯·æ±‚å»¶è¿Ÿï¼Œé¿å…å¯¹ç½‘ç«™é€ æˆå‹åŠ›
2. **æ–‡ä»¶ååŒ¹é…** - LRCæ–‡ä»¶åä¼šå®Œå…¨åŒ¹é…åŸå§‹éŸ³ä¹æ–‡ä»¶å
3. **é”™è¯¯å¤„ç†** - å¦‚æœæŸä¸ªæ–‡ä»¶è·å–å¤±è´¥ï¼Œä¸ä¼šå½±å“å…¶ä»–æ–‡ä»¶çš„å¤„ç†
4. **æ­Œè¯æ¥æº** - æ­Œè¯æ¥è‡ªæ­Œæ›²å®ç½‘ç«™ï¼ˆgequbao.comï¼‰

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šå¤„ç†å•ä¸ªæ–‡ä»¶å¤¹

```javascript
const { quickStart } = require('./gequbaoLrc');

// åªå¤„ç†1ä¸ªæ–‡ä»¶ï¼ˆæµ‹è¯•ç”¨ï¼‰
await quickStart('D:\\Music', 1);

// å¤„ç†å‰20ä¸ªæ–‡ä»¶
await quickStart('D:\\Music', 20);
```

### ç¤ºä¾‹2ï¼šè‡ªå®šä¹‰é…ç½®

```javascript
const { processFullPipeline } = require('./gequbaoLrc');

const results = await processFullPipeline('D:\\Music', {
  recursive: false,      // ä¸é€’å½’å­æ–‡ä»¶å¤¹
  limit: 100,           // å¤„ç†100ä¸ªæ–‡ä»¶
  delay: 3000,          // 3ç§’å»¶è¿Ÿ
  saveIntermediateFiles: false  // ä¸ä¿å­˜ä¸­é—´æ–‡ä»¶
});

console.log(`æˆåŠŸè·å– ${results.summary.lrcFiles} ä¸ªæ­Œè¯æ–‡ä»¶`);
```

### ç¤ºä¾‹3ï¼šå•ç‹¬ä½¿ç”¨å„æ¨¡å—

```javascript
const AudioParser = require('./gequbaoLrc/audioParser');
const { UrlGenerator } = require('./gequbaoLrc/urlGenerator');
const GequbaoCrawler = require('./gequbaoLrc/gequbaoCrawler');

// 1. è§£æéŸ³ä¹æ–‡ä»¶
const parser = new AudioParser();
const musicFiles = await parser.parseFolder('D:\\Music');

// 2. ç”ŸæˆURL
const generator = new UrlGenerator();
const urls = generator.generateDetailedUrls(musicFiles);

// 3. çˆ¬å–æ­Œè¯
const crawler = new GequbaoCrawler();
const results = await crawler.crawlBatchWithFileNames(urls, { limit: 10 });
```

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šæ‰¾ä¸åˆ°æ­Œè¯
- æ£€æŸ¥æ­Œåå’Œæ­Œæ‰‹æ˜¯å¦æ­£ç¡®è§£æ
- å°è¯•ä¿®æ”¹æ–‡ä»¶åæ ¼å¼ä¸º `æ­Œæ‰‹ - æ­Œå.mp3`

### é—®é¢˜ï¼šçˆ¬å–é€Ÿåº¦æ…¢
- é€‚å½“å‡å° `delay` å‚æ•°ï¼ˆä½†ä¸å»ºè®®ä½äº1000msï¼‰
- å¢åŠ  `maxConcurrent` å‚æ•°ï¼ˆä½†ä¸å»ºè®®è¶…è¿‡5ï¼‰

### é—®é¢˜ï¼šæ–‡ä»¶ååŒ…å«ç‰¹æ®Šå­—ç¬¦
- ç¨‹åºä¼šè‡ªåŠ¨å¤„ç†æ–‡ä»¶åä¸­çš„ç‰¹æ®Šå­—ç¬¦
- LRCæ–‡ä»¶åä¼šç§»é™¤ä¸å…è®¸çš„å­—ç¬¦

## å¼€å‘è¯´æ˜

æœ¬å·¥å…·åŸºäºNode.jså¼€å‘ï¼Œä¸»è¦ä¾èµ–ï¼š
- `superagent` - HTTPè¯·æ±‚
- `cheerio` - HTMLè§£æ
- `fs` - æ–‡ä»¶æ“ä½œ

## License

ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³ç½‘ç«™çš„ä½¿ç”¨æ¡æ¬¾ã€‚